"use strict";exports.ids=["957"],exports.modules={1071:function(t,r,e){e.d(r,{Bj:()=>o.d,DX:()=>o.f,F2:()=>o.m,Mj:()=>o.i,gB:()=>n,id:()=>o.t,vb:()=>o.c}),e(3955);var o=e(8219);async function n(t){try{let r=await t;return Object.assign([null,r,!1,!0],{error:null,data:r,isDefined:!1,isSuccess:!0})}catch(t){if((0,o.i)(t))return Object.assign([t,void 0,!0,!1],{error:t,data:void 0,isDefined:!0,isSuccess:!1});return Object.assign([t,void 0,!1,!1],{error:t,data:void 0,isDefined:!1,isSuccess:!1})}}e(4399)},3804:function(t,r,e){e.r(r),e.d(r,{ORPCError:()=>o.vb,enhanceRoute:()=>m,mergeRoute:()=>p,ContractBuilder:()=>E,isContractProcedure:()=>i,eventIterator:()=>b,mergeMeta:()=>d,oc:()=>y,prefixRoute:()=>f,unshiftTagRoute:()=>l,validateORPCError:()=>u,inferRPCMethodFromContractRouter:()=>x,fallbackContractConfig:()=>R,isSchemaIssue:()=>O,AsyncIteratorClass:()=>c.Nz,ValidationError:()=>n,mergeTags:()=>v,ContractProcedure:()=>s,minifyContractRouter:()=>function t(r){if(i(r))return{"~orpc":{errorMap:{},meta:r["~orpc"].meta,route:r["~orpc"].route}};let e={};for(let o in r)e[o]=t(r[o]);return e},type:()=>I,mergeErrorMap:()=>a,getEventIteratorSchemaDetails:()=>M,getContractRouter:()=>g,mergePrefix:()=>h,enhanceContractRouter:()=>w});var o=e(1071);class n extends Error{issues;data;constructor(t){super(t.message,t),this.issues=t.issues,this.data=t.data}}function a(t,r){return{...t,...r}}async function u(t,r){let{code:e,status:n,message:a,data:u,cause:s,defined:i}=r,c=t?.[r.code];if(!c||(0,o.DX)(r.code,c.status)!==r.status)return i?new o.vb(e,{defined:!1,status:n,message:a,data:u,cause:s}):r;if(!c.data)return i?r:new o.vb(e,{defined:!0,status:n,message:a,data:u,cause:s});let d=await c.data["~standard"].validate(r.data);return d.issues?i?new o.vb(e,{defined:!1,status:n,message:a,data:u,cause:s}):r:new o.vb(e,{defined:!0,status:n,message:a,data:d.value,cause:s})}class s{"~orpc";constructor(t){if(t.route?.successStatus&&(0,o.Bj)(t.route.successStatus))throw Error("[ContractProcedure] Invalid successStatus.");if(Object.values(t.errorMap).some(t=>t&&t.status&&!(0,o.Bj)(t.status)))throw Error("[ContractProcedure] Invalid error status code.");this["~orpc"]=t}}function i(t){return t instanceof s||("object"==typeof t||"function"==typeof t)&&null!==t&&"~orpc"in t&&"object"==typeof t["~orpc"]&&null!==t["~orpc"]&&"errorMap"in t["~orpc"]&&"route"in t["~orpc"]&&"meta"in t["~orpc"]}var c=e(3955);function d(t,r){return{...t,...r}}function p(t,r){return{...t,...r}}function f(t,r){return t.path?{...t,path:`${r}${t.path}`}:t}function l(t,r){return{...t,tags:[...r,...t.tags??[]]}}function h(t,r){return t?`${t}${r}`:r}function v(t,r){return t?[...t,...r]:r}function m(t,r){let e=t;return r.prefix&&(e=f(e,r.prefix)),r.tags?.length&&(e=l(e,r.tags)),e}function g(t,r){let e=t;for(let t=0;t<r.length;t++){let o=r[t];if(!e||i(e))return;e=e[o]}return e}function w(t,r){if(i(t))return new s({...t["~orpc"],errorMap:a(r.errorMap,t["~orpc"].errorMap),route:m(t["~orpc"].route,r)});let e={};for(let o in t)e[o]=w(t[o],r);return e}class E extends s{constructor(t){super(t),this["~orpc"].prefix=t.prefix,this["~orpc"].tags=t.tags}$meta(t){return new E({...this["~orpc"],meta:t})}$route(t){return new E({...this["~orpc"],route:t})}errors(t){return new E({...this["~orpc"],errorMap:a(this["~orpc"].errorMap,t)})}meta(t){return new E({...this["~orpc"],meta:d(this["~orpc"].meta,t)})}route(t){return new E({...this["~orpc"],route:p(this["~orpc"].route,t)})}input(t){return new E({...this["~orpc"],inputSchema:t})}output(t){return new E({...this["~orpc"],outputSchema:t})}prefix(t){return new E({...this["~orpc"],prefix:h(this["~orpc"].prefix,t)})}tag(...t){return new E({...this["~orpc"],tags:v(this["~orpc"].tags,t)})}router(t){return w(t,this["~orpc"])}}let y=new E({errorMap:{},route:{},meta:{}}),C={defaultMethod:"POST",defaultSuccessStatus:200,defaultSuccessDescription:"OK",defaultInputStructure:"compact",defaultOutputStructure:"compact"};function R(t,r){return void 0===r?C[t]:r}let S=Symbol("ORPC_EVENT_ITERATOR_DETAILS");function b(t,r){return{"~standard":{[S]:{yields:t,returns:r},vendor:"orpc",version:1,validate:e=>(0,c._p)(e)?{value:(0,o.F2)(e,{async value(e,a){let u=a?r:t;if(!u)return e;let s=await u["~standard"].validate(e);if(s.issues)throw new o.vb("EVENT_ITERATOR_VALIDATION_FAILED",{message:"Event iterator validation failed",cause:new n({issues:s.issues,message:"Event iterator validation failed",data:e})});return s.value},error:async t=>t})}:{issues:[{message:"Expect event iterator",path:[]}]}}}}function M(t){if(void 0!==t)return t["~standard"][S]}function x(t){return(r,e)=>{let o=(0,c.Jt)(t,e);if(!i(o))throw Error(`[inferRPCMethodFromContractRouter] No valid procedure found at path "${e.join(".")}". This may happen when the contract router is not properly configured.`);let n=R("defaultMethod",o["~orpc"].route.method);return"HEAD"===n?"GET":n}}function I(...[t]){return{"~standard":{vendor:"custom",version:1,validate:async r=>t?{value:await t(r)}:{value:r}}}}function O(t){return!!(0,c.fb)(t)&&"string"==typeof t.message&&(void 0===t.path||!!Array.isArray(t.path)&&!!t.path.every(t=>(0,c.hL)(t)||(0,c.fb)(t)&&(0,c.hL)(t.key)))&&!0}}};
//# sourceMappingURL=957.js.map